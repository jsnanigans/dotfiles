#!/usr/bin/env bash
# Rose Pine Theme - Single Source of Truth
# This file provides Rose Pine color definitions for all tools in the dotfiles
# Source this file in your shell configuration or tool configs

# ============================================================================
# ROSE PINE COLOR PALETTE - Main Variant
# ============================================================================

# Base colors
export ROSE_PINE_BASE="#191724"
export ROSE_PINE_SURFACE="#1f1d2e"
export ROSE_PINE_OVERLAY="#26233a"
export ROSE_PINE_HIGHLIGHT_LOW="#21202e"
export ROSE_PINE_HIGHLIGHT_MED="#403d52"
export ROSE_PINE_HIGHLIGHT_HIGH="#524f67"

# Text colors
export ROSE_PINE_MUTED="#6e6a86"
export ROSE_PINE_SUBTLE="#908caa"
export ROSE_PINE_TEXT="#e0def4"

# Accent colors
export ROSE_PINE_LOVE="#eb6f92"
export ROSE_PINE_GOLD="#f6c177"
export ROSE_PINE_ROSE="#ebbcba"
export ROSE_PINE_PINE="#31748f"
export ROSE_PINE_FOAM="#9ccfd8"
export ROSE_PINE_IRIS="#c4a7e7"

# ============================================================================
# SEMANTIC MAPPINGS
# ============================================================================

# Background colors
export THEME_BG_PRIMARY="$ROSE_PINE_BASE"
export THEME_BG_SECONDARY="$ROSE_PINE_SURFACE"
export THEME_BG_TERTIARY="$ROSE_PINE_OVERLAY"
export THEME_BG_HIGHLIGHT="$ROSE_PINE_HIGHLIGHT_MED"

# Text colors
export THEME_FG_PRIMARY="$ROSE_PINE_TEXT"
export THEME_FG_SECONDARY="$ROSE_PINE_SUBTLE"
export THEME_FG_MUTED="$ROSE_PINE_MUTED"

# Accent colors for different purposes
export THEME_ACCENT_PRIMARY="$ROSE_PINE_IRIS"
export THEME_ACCENT_SECONDARY="$ROSE_PINE_FOAM"
export THEME_ACCENT_ERROR="$ROSE_PINE_LOVE"
export THEME_ACCENT_WARNING="$ROSE_PINE_GOLD"
export THEME_ACCENT_SUCCESS="$ROSE_PINE_PINE"
export THEME_ACCENT_INFO="$ROSE_PINE_ROSE"

# ============================================================================
# TOOL-SPECIFIC EXPORTS
# ============================================================================

# For FZF
export FZF_DEFAULT_OPTS="
  --color=bg+:$ROSE_PINE_SURFACE,bg:$ROSE_PINE_BASE,spinner:$ROSE_PINE_IRIS
  --color=hl:$ROSE_PINE_ROSE,fg:$ROSE_PINE_TEXT,header:$ROSE_PINE_IRIS
  --color=info:$ROSE_PINE_FOAM,pointer:$ROSE_PINE_IRIS,marker:$ROSE_PINE_LOVE
  --color=fg+:$ROSE_PINE_TEXT,prompt:$ROSE_PINE_IRIS,hl+:$ROSE_PINE_ROSE
  --color=border:$ROSE_PINE_HIGHLIGHT_HIGH
"

# For bat/delta
export BAT_THEME="rose-pine"
export DELTA_FEATURES="rose-pine"

# For LS_COLORS (if using)
export LS_COLORS="di=38;2;156;207;216:ln=38;2;235;188;186:ex=38;2;49;116;143"

# ============================================================================
# FUNCTIONS FOR DYNAMIC USE
# ============================================================================

# Function to get RGB values from hex
rose_pine_hex_to_rgb() {
    local hex="${1#\#}"
    printf "%d,%d,%d" 0x${hex:0:2} 0x${hex:2:2} 0x${hex:4:2}
}

# Function to set terminal colors (for tools that need RGB)
rose_pine_get_rgb() {
    local color_name="$1"
    local var_name="ROSE_PINE_${color_name^^}"
    local hex_value="${!var_name}"
    rose_pine_hex_to_rgb "$hex_value"
}